<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<SplitPane fx:id="splitPane" dividerPositions="0.75" orientation="HORIZONTAL"
           xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.example.cab302project.controllers.ProfileController">

    <!-- Left (Main Profile Area) -->
    <VBox fx:id="mainContent" minWidth="0" style="-fx-padding: 0; -fx-background-color: #F0F8FF;" VBox.vgrow="ALWAYS">

        <!-- Top Title Bar -->
        <VBox maxHeight="100" minHeight="100" prefHeight="100"
              style="-fx-background-color: linear-gradient(to bottom, #2e014f 0%, #4B0082 50%, #6A4B8B 100%);">
            <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 20;">
                <ImageView fx:id="logoImage" fitHeight="60" preserveRatio="true" />
                <Label style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"
                       text="Smart Schedule Assistant - Profile" />
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
        </VBox>

        <!-- Scrollable Profile Content -->
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" VBox.vgrow="ALWAYS">
            <VBox alignment="TOP_CENTER" spacing="30" style="-fx-background-color: #F0F8FF;">
                <padding>
                    <Insets top="40" right="40" bottom="40" left="40" />
                </padding>
                <children>
                    <!-- Profile Picture -->
                    <StackPane alignment="CENTER">
                        <ImageView fx:id="profileImageView" fitHeight="240.0" fitWidth="240.0" preserveRatio="true"
                                   style="-fx-effect: dropshadow(gaussian, #999, 10, 0.3, 0, 2); -fx-border-color: #BBB; -fx-border-radius: 120; -fx-background-radius: 120; -fx-border-width: 2; -fx-background-color: white; -fx-background-insets: 0;" />
                    </StackPane>

                    <!-- Username Display -->
                    <Label fx:id="profileNameLabel" text="User" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2e014f;" />

                    <!-- Bio Section -->
                    <VBox spacing="12" alignment="CENTER" style="-fx-background-color: #ECECFF; -fx-padding: 24 40 24 40; -fx-background-radius: 14; -fx-border-color: #D8B9FF; -fx-border-radius: 14;">
                        <Label text="Bio" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1A1A1A; -fx-underline: true;" />
                        <TextArea fx:id="bioTextArea" prefHeight="160" prefWidth="600" wrapText="true" editable="false"
                                  style="-fx-background-color: white; -fx-border-color: #CCCCFF; -fx-border-radius: 10; -fx-background-radius: 10; -fx-font-size: 14px; -fx-text-fill: #333;" />
                    </VBox>

                </children>
            </VBox>
        </ScrollPane>
    </VBox>

    <!-- Right Sidebar (Expanded by Default) -->
    <VBox fx:id="aiSidebar" maxWidth="350" minWidth="350" spacing="10" style="-fx-background-color: #E6E6FA; -fx-padding: 20;">
        <Button alignment="CENTER_LEFT" maxWidth="350" onAction="#goToHome" prefHeight="50" style="-fx-text-fill: #1A1A1A; -fx-background-color: #CCCCFF; -fx-font-size: 20px; -fx-background-radius: 12px; -fx-font-weight: bold;" text="HOME" />
        <Button alignment="CENTER_LEFT" maxWidth="350" onAction="#openSettingsPage" prefHeight="50" style="-fx-text-fill: #1A1A1A; -fx-background-color: #CCCCFF; -fx-font-size: 20px; -fx-background-radius: 12px; -fx-font-weight: bold;" text="SETTINGS" />
        <Button alignment="CENTER_LEFT" maxWidth="350" onAction="#openFriendsPage" prefHeight="50" style="-fx-text-fill: #1A1A1A; -fx-background-color: #CCCCFF; -fx-font-size: 20px; -fx-background-radius: 12px; -fx-font-weight: bold;" text="FRIENDS" />

        <!-- Mini Day View -->
        <ScrollPane fitToHeight="true" fitToWidth="true" style="-fx-background-color: transparent;" VBox.vgrow="ALWAYS">
            <GridPane fx:id="miniDayView" hgap="5" style="-fx-padding: 10; -fx-background-color: #CCCCFF; -fx-border-radius: 10; -fx-background-radius: 10;" vgap="5">
                <!-- Mini day view content filled dynamically -->
            </GridPane>
        </ScrollPane>

        <Button fx:id="profileButton" alignment="CENTER_LEFT" maxWidth="350" prefHeight="50" style="-fx-text-fill: #1A1A1A; -fx-background-color: #D8B9FF; -fx-font-size: 20px; -fx-background-radius: 12px; -fx-font-weight: bold;" text="PROFILE" />
        <Button alignment="CENTER_LEFT" maxWidth="350" onAction="#handleLogOut" prefHeight="50" style="-fx-text-fill: #1A1A1A; -fx-background-color: #CCCCFF; -fx-font-size: 20px; -fx-background-radius: 12px; -fx-font-weight: bold;" text="LOG OUT" />
        <VBox.margin>
            <Insets top="10" />
        </VBox.margin>
    </VBox>
</SplitPane>
